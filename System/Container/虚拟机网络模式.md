## Docker

docker 默认网桥模式: 虚拟一个网桥 (docker0), 为每一个容器分配一个IP地址 (container ip), 网桥是每个容器默认网关

| 网络模式  | 配置                           | 说明                                                                                                  |
| --------- | ------------------------------ | ----------------------------------------------------------------------------------------------------- |
| host      | --network host                 | 容器和宿主机共享 Network namespace. **注意,共享网络不等于共享代理**                                                                    |
| container | --network container:NAME_OR_ID | 容器和另外一个容器共享 Network namespace                                                              |
| none      | --network none                 | 容器有独立的 Network namespace，但并没有对其进行任何网络设置，如分配 veth pair 和网桥连接，配置 IP 等 |
| bridge    | --network                      | bridge 默认模式, 网络隔离, 但分配一个内部IP. 构建时也使用该网络模式.                                                                                       |


> 部分软件不走 系统/Shell 代理, 需要单独设置代理. 比如 Go, Git. 代理可以配置为宿主机本地网络上的代理软件. 如 [Clash](../../Network/VPN/Clash.md)

隔离网络:
```shell
# 用户自定义网络时, 默认和宿主网络是隔离的
docker network create <my_network>

docker run ... --network <my_network>
```

## VM

| 模式                    | 虚拟机</br> <-> </br>宿主机 | 虚拟机</br> <-> </br>虚拟机 | 虚拟机</br> <-> </br>外部网络 | 说明                                             |
| ----------------------- | --------------------------- | --------------------------- | ----------------------------- | ------------------------------------------------ |
| 桥接模式  (Bridged)     | 是                          | 是                          | 是                            | 虚拟机直接连接到物理地址, 拥有独立IP             |
| NAT                     | 是                          | 是                          | 是 (通过宿主)                 | 虚拟机通过宿主机连接访问外部网络, 虚拟机有虚拟IP |
| 内部网络模式 (Internal) | 否                          | 是                          | 否                            | 仅虚拟机之间通过专用虚拟网络通信                                                |
| 仅主机 (Host-Only)      | 是                          | 是                          | 否                            | 虚拟机和主机间有虚拟网络接口, 但无法访问外部网络                                                |
