## 网络连通性测试

| 工具            | 用途                             | 示例                         | 所用协议        |
| --------------- | -------------------------------- | ---------------------------- | --------------- |
| `ping`          | 测试延迟                         | `ping 8.8.8.8`               | ICMP            |
| `traceroute`    | 跟踪路由路径                     | `traceroute google.com`      |                 |
| `mtr`[^1]          | 动态跟踪路由路径, 监控延迟和丢包 | `mtr google.com`             |                 |
| `telnet/netcat` | 测试特定端口连通性               | `telnet google.com 80`       |                 |
| `curl/wget`     | 测试 HTTP/HTTPS 等应用层服务     | `curl -I https://google.com` | HTTP, SMTP, FTP |
| `nmap`          | 局域网端口扫描, 安全测试服务       | `nmap google.com`            | TCP/UDP, ICMP   |
| `nslookup`      | 查询 [DNS](../../Network/ApplicationL5/DNS.md), 简单信息(IP, CNAME)    | `nslookup google.com`        |                 |
| `dig`           | 查询 [DNS](../../Network/ApplicationL5/DNS.md), 详细信息(A, MX, TXT)   |                              |                 |
| `whois`         | 查询域名或地址的注册商, 注册信息 |                              |                 |


一些 WEB 端服务:
- `https://ipinfo.io/`, IP 信息及地理位置
- `https://www.pingdom.com/` 网站的运行时间和响应速度
- `https://dnschecker.org/` DNS 记录查询, 以及 DNS 缓存传播检测
- `https://lookup.icann.org/en` 在线 WhoIS
- 

[^1]: [`mtr`](http://www.bitwizard.nl/mtr/), my traceroute, = traceroute+ping. 提供了交互界面, 不过不太火.

## [DNS](../../Network/ApplicationL5/DNS.md) 工具

### `nslookup` 

根据域名查看 ip.

### `dig` & `host`

查询 domain 的 DNS 信息.

```bash
dig domain
```

### `whois`

Gets whois information for domain.  

```bash
whois domain
```

## 本地信息

### `ip`

检查主机网络地址 `ip addr show`

### `iftop`, `nethogs`,`slurm`

[`iftop`](http://www.ex-parrot.com/~pdw/iftop/), [`bandwhich`](https://github.com/imsnif/bandwhich) 或 [`nethogs`](https://github.com/raboof/nethogs) 用于查找正在使用带宽的套接字连接或进程. 其中 nethogs 可以将流量分解到进程, 诊断带宽使用时更有效. slurm 则用于对总体流量变化进行可视化, 更简洁.

iftop 侧重于持续监控网络连接, netstat 则用于一次性检查网络配置和状态.

### `netstat`, `ss`

`netstat` (network statistics) 用来显示套接字信息.

- `t` 显示 TCP 连接
- `u` 显示 UDP 连接
- `l` 仅显示处于监听状态的服务端口
- `a` 显示所有套接字 (包括非监听状态的)
- `n` 显示地址和端口号的数字形式 (不解析为名称)
- `p` 显示每个连接对应的进程ID和进程名

```bash
# 监听端口进程
netstat -lntp
ss -plat

# 用 lsof 也可实现, 显然更麻烦.
lsof -iTCP -sTCP:LISTEN -P -n
```

`ss` (socket statistics) 比 `netstat` 更加现代, 处理速度更快.

## 网络过滤

### `wireshark`, `tshark`

[`wireshark`](https://wireshark.org/), [`tshark`](https://www.wireshark.org/docs/wsug_html_chunked/AppToolstshark.html) 和 [`ngrep`](http://ngrep.sourceforge.net/) 都是用于截获过滤报文的工具. 其中 tshark 和 ngrep 是命令行工具.

该系列工具用于分析**报文具体协议和内容**, 而 `iftop` 则仅用于监控流量.

### `iptable`

### `netcat`, `socat`

`netcat` (or `nc`) 用于读取和写入网络连接. 常见用途为端口扫描, 监听传入连接, 端口重定向 (转发) 和测试. 当然, 端口扫描更专业的工具是 `nmap`, `netcat` 监听链接时有安全问题. `socat` 是其增强版.

```sh
nc -l 1234           # 监听端口, 作为服务器
nc example.com 1234  # 连接到主机端口, 作为客户端
# 转发 tcp 端口
socat TCP-LISTEN:port1,fork TCP:target.address:port2
```

## 网络传输

### `scp, rsync`

用于和远程主机间传输文件. `rsync` 还支持增量续传, 用于大量文件的同步.

### `ssh`

远程连接, `telnet` 的安全替代.

### `curl, wget`

访问和获取网络内容.

