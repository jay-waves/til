## 文件信息??

```sh
$ ls -al
-rwxr-xr-x 1 dirge dirge 16697 May 29 10:19 tmp
[类型,权限][链接][拥有者][群组][文件大小][修改日期(mtime)][文件名]
```

### 类型

linux 不以 `.pofix` 形式区分文件类型

`-rwxr-xr-x`, `drwxr-xr-x`
- 第一个字符代表文档类型
1.  \[d] -> 目录
2.  \[-] -> 文件
3.  \[l] -> link file
4.  \[b] -> RAM, 可随机存取设备
5.  \[c] -> 一次性读取设备, 如键盘/鼠标

- 接下来三组`rwx`
1. \[r] -> 可读, \[w] -> 可写, \[x] -> 可执行(execute), \[-] -> 没有当前权限
2. 从左到右依次权限身份为: `文件拥有者权限, 加入此群组(group)之账号的权限, 非本人且未加入group之其他人的权限`

#### 隐藏文件

隐藏文件以 `.` 开头, 如 `.gitignore`. 每个文件夹都有两个默认隐藏文件: `.` 和 `..`, 默认不在 `ls` 中显示, 需使用 `ls -a`

### 时间

文件有三种时间:
1. status-time (ctime): 状态, 权限, 属性 更改时会更新此时间. 不可移植(复制)
2. access-time (atime): 该文件内容被读取或获取时会更新此时间
3. modification-time (mtime): 文件内容变更时, 会更改此时间. 此时间为默认时间

查询命令如 `ls -l --time=atime`

## 文件权限

Linux 中权限以权限位形式出现, 如文件权限为可能是 `rwx rwx r--`, 第一个 `rwx` 为*属主*权限, 第二个 `rwx` 为*群组*权限, 第三个 `rwx` 为*访客*权限, 无权限用 `-` 占位.

对于目录而言, `x` 表示"可以进入目录", `w` 表示"有编辑权限". `rwx` 也分别对应数字 `124`, 权限可简写为三者之和. 如 `rw-` 对应 `3`.

### chmod 

设置权限为 `rwxr-xr-x`:

```bash
# 如果原本权限为: r-xr-xr-x
# u 代表用户, g 代表群组
chmod u+w file 

# 或直接:
chmod 755 file
```

将某个文件夹递归设置权限: 

```bash
chmod -R 777 path
```

### umask 

设置新建文件权限: `umask 000` 

umask 是一个权限掩码, 请求的权限码和 umask 进行按位与非, 生成最终权限码 (即 umask 中定义的权限被移除. 仅在临时会话有效. 系统默认 `umask 022`, 在 /etc/profile 中.

### `s` 位

`chmod u+s ...` 指 setuid, 无论谁执行该文件, 程序都会自动以文件所有者的权限运行. 用于需要提供临时提权的程序. 

`chmod g+s ...` 指 setgid, 无论谁执行该文件, 都会以文件属组的权限运行. 设置在目录时, 目录下所有新文件都会继承此目录的组, 而非创建者的组.

此时程序权限如: `rws...`

### `t` 位

也称粘滞位, 设置在目录上时, 即使多个用户都有对目录的写权限, 但只有文件的所有者或超级用户才能**删除或重命名**该目录.

此时权限如: `drwxrwx--T`


***



#### 修改权限

改变群组: 
change group: `chgrp [-R] group_name dirname/filename`
1. -R 指向下递归执行
2. group_name即要修改为的群组名, 必须存在于/etc/group中
3. 若要新建群组, 使用`groupadd new_group_name`

- `chown`也可以修改群组
例如 ： `chown mao:friends file.txt`
就是把file.txt文件的所有者改为mao ,群组改为 friends

改变拥有者:
`chown [-R] user[:group_name] dirname/filename`
```bash
#应用场景: 将文档.bashrc拷贝给某人(bin)
su - #->root
cp .bashrc .bashrc_copy #cp会复制执行者的属性、权限
ls -al .bashrc*
chown bin:bin_group .bashrc_copy
```

数字型权限修改:
```
r: 4
w: 2
x: 1
```
- 权限值需要rwx权限值的累加， 如rwx对应7， r--对应4
- `chmod [-R] xyz dir/file_name`, xyz对应数字权限值, x->owner, y->group, z->others，如所有人获取全部权限:`chmod 777 file`

符号类型权限修改: 
e.g.1 :  `chmod u=rwx,go=rx file_name`
u->user, g->group, o->others, a->all
e.g.2 : `chmod a+x file_name` 或 `chmod a-x file_name`
+, - 指不改变其他权限基础上, 修改某个权限