并行系统需要共识算法, 常见有:
- 工作量证明算法 PoW
- 权益证明算法 PoS
- 委托人证明算法 DPoS
- 使用拜占庭容错算法 PBFT

### PoW

Proof of Work 通过解数学难题(计算困难, 验证简单)竞争出块权, 保证网络出块速度维持在 10min/block, 从而保证分布式系统的稳定.

其基本步骤如下:
- 系统选择 difficulty, 控制出块速度.
- 矿工从链上获取待交易信息, 进行 [sha256](../../消息摘要/迭代型散列函数.md) 计算, 直至其结果前导0数量为difficulty. 矿工得出结果后, 将获得出块权.
- 其他节点会验证该节点, 得到充分验证后, 该块上链完成交易. 矿工获得奖励 (交易费用, 原始币).

在PoW系统中, 各节点有充分动机维持主区块链不分叉, 否则自己在无效链上挖出的区块不会获得收益. 若攻击者想篡改某个块的交易, 他需要 **51%** 的网络总算力, 才能使区块链假分支的长度大于主分支, 从而取代主分支.

PoW系统至今稳定运行, 有几个缺点:
- 区块信息体积庞大 (这是所有区块链系统的缺点, 因为所有节点都要维护区块链信息一致).
- 挖矿消耗大量电力资源.
- 算力集中, 有中心化风险.

### PoS

Proof of Stake (权益证明), 不通过解数学难题竞争出块权, 而是通过持币人投票权重来决定出块权, 比如: 通过验证者 (Validators) 的持币量与持币时间, 保护环境(doge. 

因为要获得出块权, 节点需要一定持币量, 所以节点攻击系统的意愿较小, 因为系统代币贬值也会导致节点自身受损.

其基本步骤如下:
- 系统根据(持币量, 持币时间, 随机性)来选择验证者.
- 被选中验证者创建新取款, 过程中提供一些"抵押"作为诚信保证, 完成并获得验证后可以得到奖励.
- 块被创建后, 其他验证者对其进行检查和确认, 最终上链.

缺点如下:
- 初始化困难, 项目启动时通过ICO, 私募或公募方式分配较多初始币给早期支持者, 富有者有更高机会获得出块权, 造成富者更富, 财富集中 (中心化).
- 无费用攻击 (Nothing at Stake): PoW中节点有动力维持链不分叉, 但PoS中节点只负责验证, 即使上了错误链也没有沉没成本. 攻击者能以较低成本造成PoS分叉, 而PoW中攻击者则需要大量算力来使篡改链长于当前主链 (从而双重支付), 为此PoS后来引入了"抵押"机制.

### DPoS

委托权益认证 (Delegated Proof of Stake), 选出一些节点代表来维护区块链网络, 随机选择节点代表来出块 (而不是竞争). DPoS达成共识的速度远快于PoS/PoW.