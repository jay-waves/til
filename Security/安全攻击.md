当且仅当两个计算机的性能达到同一级别时, 安全才是值得考虑的事项. 如果一个计算机不能对另一个计算机进行大致模拟, 就不可能利用另一个计算机的安全漏洞.

安全是一个很宽泛的名词, 宏观上, 攻击者旨在破坏某些[安全属性](ReadMe.md); 微观上, 则是通过各种手段对信息系统的方方面面进行攻击. 从技术层面来看, 有: 网络安全, 应用安全, 系统安全, 物理安全. 从漏洞利用时机来看, 在设计阶段, 实现阶段, 部署阶段都可能存在安全隐患. 从攻击方式来看, 有拒绝服务类, 注入攻击类, 旁路攻击类, 权限提升类等, 以下主要从不同攻击方式介绍安全漏洞.


# 1. 网络安全

## 1.1 DoS

**攻击类型:**
- Syn Flood: 发送大量 [TCP SYN](../Network/传输层/TCP.md) 报文, 使服务器建立大量半连接状态, 耗尽服务资源.
- ICMP Flood: 发送大量 ICMP echo request.
- UDP/IP Flood: 发送大量碎片 [UDP](../Network/传输层/UDP.md) 报文, 占用内存.
- Land: 发送目的地址和源地址相同的报文, 使服务器不断向自己发送数据.
- Tear Drop: 发送伪造的, 含有假 offset 的 tcp 报文.
- Ping of Death: 超过 IP 最大长度 65535 的 ping.
- Smurf: 广播源地址为攻击目标的 ICMP echo request, 使攻击目标收到大量 ICMP echo reply.
- Fraggle: 类似 Smurf, 但使用 UDP.
- Connection Flood: 开启大量连接, 不释放.
- Reload: 不断请求网页重载 (浏览器 F5).
- DDoS: (Distributed Denial of Service): 控制多个僵尸网络 (傀儡机), 对服务器发起攻击

**防御 Dos:**

限制异常的高速的通信流量, 关闭不必要的服务, 避免资源耗尽. 

## 1.2 网络协议缺陷

### 1.2.1 ARP 欺骗

[ARP](../Network/网络层/ARP.md) 协议会信任所有收到的 ARP 响应, 如果更新了错误的 IP-MAC 映射, 会将 IP 包转发到错误的 (恶意的) MAC 地址设备.

### 1.2.2 DNS 欺骗

攻击者给请求者发送错误的  响应, 引导用户至恶意网站. 另一种称呼为 **DNS 缓存中毒攻击**, 

针对 [DNS](../Network/应用层/DNS.md) 不同阶段, 有两种表现形式:
- DNS 缓存投毒: 攻击者给域名服务器注入非法网络域名地址, 使用户跳转到非法地址
- DNS 重定向 (欺骗): 攻击者假冒域名服务器, 受害者的 DNS 请求被重定向到攻击者控制的地址内.

### 1.2.3 ICMP 重定向

攻击者伪造 [ICMP](../Network/网络层/ICMP.md) 重定向消息, 使主机将流量发往攻击者伪造的网关 (某个攻击者控制的 IP), 从而建立恶意路由.

...

### 1.2.4 TCP 连接劫持

TCP 欺骗攻击 (Spoofing), 也叫 TCP 劫持攻击 (Hijacking). 攻击者在两个合法通信方之间插入或篡改数据包, 从而实现窃听和冒充的目的. 攻击原理是, 攻击者监听到双方的通信序列号, 通过构造与通信一方相似的数据包, 使其看起来像是合法一方发出的. 

```
        Evil
     /          \
    /            \
Alice  <--------> Bob
```

- Evil: 
- Evil -> Bob: `SYN=1, seq=a`, 开启同步位, 请求重新发起链接, 不使用原链接. 序列号 `seq=a` 是监听或者预测的.
- Bob -> Alice: `SYN=1, ACK=1, seq=b, ack=a+1`, Bob (服务器) 向 Alice 发出请求确认报文.
- Evil -> Alice: 确认报文该报文被 Evil 截获. 同时, Evil 向 Alice 发起 Dos 攻击, 使 Alice 错误处理 Bob 的请求确认报文.
- Evil -> Bob: `ACK=1, seq=a+1, ack=b+1`, 向 Bob 发出确认报文, 从而在新地址冒充 Alice, 与 Bob 建立了新 TCP 链接.

注意, 发送伪造的 `SYN` 包并不能劫持现有连接, 如果 TCP 连接不唯一, 服务器会向旧连接 (Alice) 发送 `RST` 重置请求.

## 1.3 注入攻击

### 1.3.1 SQL 注入

### 1.3.2 命令注入

LDAP 注入, XML 注入

## 1.4 旁路攻击

也叫侧信道攻击 (Side-Channel Attack), 一般指监控物理硬件的侧信道 (电磁泄漏, 功耗, 时序等) 来提取信息.

### 1.4.1 能耗分析攻击

熔断攻击

Spectre

熔断攻击...

### 1.4.2 时间分析攻击

### 1.4.3 错误消息分析攻击

## 1.5 社会工程学攻击

也称为社会工程学攻击 (Phishing Attack)

常见工具集: [SET](https://github.com/trustedsec/social-engineer-toolkit)

### 1.5.1 口令敲诈

### 1.5.2 钓鱼攻击

## 1.6 权限提升

系统配置不当, 访问权限控制不当, 绕过验证

如本地权限提升 (Local Priviledge Escalation) 和远程权限提升 (Remote Priviliege Escalation)

### 1.6.1 跨站脚本攻击

Cross-Site Scripting, XSS, 在网页中插入恶意脚本, 让用户在浏览中无意执行未经授权的代码.

### 1.6.2 跨站请求伪造

Cross-Site Request Forgery, CSRF, 欺骗用户在认证状态下执行未授权操作.

## 1.7 密码学攻击

### 1.7.1 中间人攻击

MitM, Man in the Middle

### 1.7.2 碰撞攻击

Collision Attack

### 1.7.3 字典攻击

尝试所有可能的密码组合来破解密码, 称为*暴力破解 (Brute Force Attack)*. 用预定义包含常见密码组合的字典文件来尝试破解, 称为*字典攻击 (Dictionary Attack)*. 用预计算的哈希值与明文密码的映射表来破解哈希密码, 称为*彩虹表攻击 (Rainbow Table Attack)*.

### 1.7.4 重放攻击

Replay Attack

### 1.7.5 Padding Oracle Attack

针对分组加密的填充机制的攻击, 通过加密软件的**错误响应信息**来推测密文具体内容. 

详见 https://en.wikipedia.org/wiki/Padding_oracle_attack

# 2. 软件和系统安全

## 2.1 信息流

- 信息流机密性
- 信息流完整性

## 2.2 控制流

控制流完整性

## 2.3 内存安全

- 内存泄露
- 堆栈保护
- 释放后使用

## 2.4 数据类型安全

- 类型检查
- 类型转换, 如实践格式

## 2.5 资源安全

- Profiling
- 沙盒 (Sandbox)
- 资源控制, 权限隔离

## 2.6 恶意软件攻击

### 2.6.1 木马

Trojan Horse, 伪装成合法软件欺骗用户执行.

### 2.6.1 病毒

Virus, 恶意软件, 嵌入在各类文件中传播, 从而感染系统.