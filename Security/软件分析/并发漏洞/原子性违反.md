分类:
1. **单字长单变量**: 指对单变量的有序的读写操作的一致性冲突.
2. 多字长单变量: 变量长度比处理器字长长, 如 uint64_t 在 uint32_t 平台上, 处理单个变量需要多个指令.
3. 多变量语义相关: 结构体 / 关联条件变量 等, 语法上不要求原子性, 但是语义上要求. 没有正确使用锁保护.
4. 内存顺序: 变量未刷写 (内存同步), 但是有写
5. 硬件指令: 单个硬件指令本身有多个阶段, 不是原子的, 可能被打断. 有一部分内存顺序包含在该类
6. 硬件并行访问: 如硬件 DMA 和 CPU 在修改同一内存区域, 没有中断服务程序, 和软件指令无关.

中断检测:
- 基于指令距离: (静态代码距离, 指令数)
- 基于时间 (时间较短)

## 单变量访问序竞争

对同一变量 x 的连续 3 次访问, 有 4 种访问顺序组合可能导致有害数据竞争:
- `R (t1)` --> `W (t2)` --> `R (t1)` 
- `W (t1)` --> `W (t2)` --> `R (t1)`
- `R (t1)` --> `W (t2)` --> `W (t1)`
- `W (t1)` --> `R (t2)` --> `W (t1)`

## TOCTOU

TOCTOU (Time Of Check To Time of Use) 缺陷. 在检查资源与使用资源之间的短暂窗口, 通过改变资源状态, 导致使用资源时出错. 


## 参考

基于变量访问序模式的中断竞争检测方法. 2016. 陈睿, 杨孟飞, 郭向英. 中国控制工程研究所