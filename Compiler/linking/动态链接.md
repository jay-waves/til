Unix 中动态链接文件被称为动态共享对象 (Dynamic Shared Objects, DSO), 扩展名为 `.so`; 在 Windows 上, 被称为动态链接库 (Dynamical Linking Library), 扩展名为 `.dll`.

动态链接由*动态链接器*进行, **将链接过程从程序装载前, 推迟到装载时**, 将程序拆分为独立模块. 动态链接比静态链接有大概 5% 的性能损失, 但是**节省了空间**并简化了程序构建.

## PIC

位置无关代码 (Position-Independent Code, PIC) 是动态链接的特点, 其目标是减少甚至消除在装载可执行文件时的重定位行为. PIC 使用相对地址来代替原本代码中的绝对地址, 从而让代码在任意内存位置运行.

PIC 允许多个进程共享同一共享库的代码段, 并且由于不需要重定位修改代码段中的地址, 所以加载时间更快. 每个进程有独立的数据段, 数据段中有GOT的独立副本.

- 内存效率高
- 加载效率快, 尤其是系统重启或进程频繁启动时.
- 安全性强, 支持*地址空间布局随机化 (ASLR)*, 防范缓冲区溢出攻击.

~~全局偏移表 (Global Offset Tabale, GOT) 用于存储全局变量和函数的地址. 加载时, GOT 动态更新, 而代码中仅记录GOT中变量的相对位置, 通过寄存器间接寻址来访问数据.


## PLT

延迟绑定, 即只有在函数第一次调用时猜进行解析并写入GOT, 减少不必要的重定位开销.



```assembly
PLT0:
	push *(GOT + 4)
	jump *(GOT + 8)

...
bar@plt:
	jmp *(bar@GOT)
	push n
	jump PLT0
```

## 步骤