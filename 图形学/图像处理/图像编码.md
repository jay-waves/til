## 图像编码分类:

1. 信息保持编码 (无损编码): 不丢失信息
2. 保真度编码 (有损编码): 压缩人眼感知不到的信息
3. 特征编码 (感兴趣区域编码): 仅保留供机器分析的特征

传输过程:  
```
图像编码 -> 信道编码 -> 信道 -> 信道解码 -> 图像解码
```

图像编码过程:  
```
图像变换 -> 量化 -> 熵编码
```

图像解码:
```
符号编码 -> 图像反变换
```

## 1 信息论

**自信息量** 描述某事件带来的信息量, 概率越小信息量越大  
设图像灰度集为 $(W_{1},W_{2},\dots,W_{M})$, 概率分别为 $P_{1}, P_{2}, \dots, P_{M}$, 其自信息量为 $I(W_{K})=-\log_{2}P_{k}(W_{K})$

**信息熵 (entropy)** 描述一个随机变量的不确定性.  
$$H=\sum^{M}_{k=1}P_{K}(W_{k})\cdot I(W_{k})=-\sum^{M}_{k=1}P_{k}\log_{2}P_{k}$$

**当所有码字出现概率相等, 即对所有结果没有偏见时, 信息熵最大**

### 条件熵

无记忆信息熵 ( 0阶熵, $H_{0}(\cdot)$ ): 各像素的灰度值是相互独立的.

**条件熵**: 对于记忆信源, 假设某一像素灰度值和前一个像素灰度级相关.
$$H\left( \frac{W_{i}}{W_{i-1}} \right)=-\sum^{M}_{k=1}\sum^{M}_{k=1}P(W_{i}, W_{i-1})\cdot \log_{2}P\left( \frac{W_{i}}{W_{i-1}} \right)$$
而其中 $P(W_{i}, W_{i-1})=P(W_{i})P\left( \frac{W_{i}}{W_{i-1}} \right)$. 称为一阶熵 $H_{1}(\cdot)$. 

可知 $H_{0}(\cdot)>H_{1}(\cdot)>H_{2}(\cdot)>\dots$

> 详见  [信息熵](../../数学/信息论/熵.md)

## 2 编码

![熵编码](../../数学/信息论/熵编码.md)

图像常见编码方式有:
1. 哈夫曼编码
2. 香农编码
3. 算术编码

> 详见 [信息论:常见编码方式](../../数学/信息论/算术编码.md)

## 3 预测和量化

预测法编码分类:
- 线性预测: 差值脉冲编码调制法 (DPCM)
- 非线性预测:

- 帧内预测法: 在同一图像内进行
- 帧内预测法: 在多幅图像之间进行

### 预测法编码

基本思想是用已存在像素值拟合线性函数, 用来预测未来的像素, 即 $\hat{x}_{n+1}=a_{1}x_{1}+a_{2}x_{2}+\dots a_{n}x_{n}$ 预测, 预测误差为 $e_{n+1}=x_{n+1}-\hat{x}_{n+1}$. 预测法编码通常对**预测误差编码**, 而不是对信号本身编码.


预测和量化

图像降质:
- 斜率过载引起的黑白边沿模糊, 分辨率降低
- 颗粒噪声: 量化下界过大
- 假轮廓: 量化间隔过大, 不够精细
- 边沿忙乱: (前后两张图边沿波动) 
- 误码扩散: 

*压缩比:* r=编码前比特数/编码后比特数

*比特率:* b=总比特数/总像素数 (bpp)

### JPEG编码

联合图像专家组 (Joint Photographic Experts Group, JPEG), 1993, 文件后缀为 `.jpg`

```
                        量化表     熵编码表
                          |          |
                          V          V
源图像数据 -> 图像变换 ->　量化器 ->  熵编码器 -> 压缩后数据
```

- 使用 $8\times 8$ DCT变换
- 使用量化表对 64 个DCT系数进行线性量化
- 对[DC系数](图像变换.md)进行*DPCM编码* 对AC系数进行[哈夫曼编码](../../数学/信息论/算术编码.md).

|            | JPEG           | JPEG2000 |
| ---------- | -------------- | -------- |
|  变换算法  |    DCT变换     |       小波变换   |
| AC系数压缩算法| 哈夫曼编码 | 自适应算术编码 |
|         |   | 压缩比提高30%    |
